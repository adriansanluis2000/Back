extends layout

block content
  h1 Realizar un pedido
  link(rel='stylesheet' href='css/orders.css')
  br
  br
  form(action='/process-order' method='POST')
    // Contenedor del formulario de añadir productos
    div.formulario
      // Campo para el nombre del producto
      div.form-group
        label(for='nombre') Nombre del producto:
        input.form-control(type='text' name='nombre')
      // Campo para la cantidad de productos
      div.form-group
        label(for='cantidad') Cantidad:
        input.form-control(type='number' name='cantidad')
      // Botón para añadir producto
      button.btn.btn-primary(type='button' onclick='agregarProducto()') Añadir producto

    // Lista de productos agregados en forma de tabla
    table.table.table-striped
      thead
        tr
          th Producto
          th Cantidad
          th Precio Total
      tbody#lista-productos

    // Botón para realizar el pedido
    button.btn.btn-primary(type='submit') Realizar pedido

  script(src="https://code.jquery.com/jquery-3.6.0.min.js")
  script.
    function agregarProducto() {
      // Obtener el nombre y la cantidad del producto
      var nombre = $('input[name="nombre"]').val();
      var cantidad = $('input[name="cantidad"]').val();

      // Validar que se haya ingresado un nombre y una cantidad
      if (nombre.trim() === '' || cantidad.trim() === '') {
        return;
      }

      // Calcular el precio total
      var precioTotal = calcularPrecioTotal(nombre, cantidad);

      // Crear la fila de la tabla para el producto agregado
      var filaProducto = $('<tr>');
      $('<td>').text(nombre).appendTo(filaProducto);
      $('<td>').text(cantidad).appendTo(filaProducto);
      $('<td>').text(precioTotal).appendTo(filaProducto);

      // Agregar la fila a la lista de productos agregados
      filaProducto.appendTo($('#lista-productos'));

      // Limpiar los campos de entrada
      $('input[name="nombre"]').val('');
      $('input[name="cantidad"]').val('');
    }

    function calcularPrecioTotal(nombre, cantidad) {
      // Aquí puedes realizar la lógica para calcular el precio total del producto
      // según tus requerimientos y datos de la base de datos.
      // Por simplicidad, retornaremos una cadena con el valor 0.00
      return '0.00';
    }
